# מדריך שימוש ב-Git ו-Git LFS לפרויקט ה-CRM

מדריך זה נועד לעזור לך לעדכן קבצים באופן עצמאי בפרויקט ה-CRM, תוך התמודדות עם מגבלות גודל ומספר קבצים בגיטהאב.

## תוכן עניינים

1. [מה זה Git LFS?](#מה-זה-git-lfs)
2. [עדכון קבצים רגילים](#עדכון-קבצים-רגילים)
3. [עדכון קבצים גדולים](#עדכון-קבצים-גדולים)
4. [התמודדות עם מגבלת 100 הקבצים](#התמודדות-עם-מגבלת-100-הקבצים)
5. [פתרון בעיות נפוצות](#פתרון-בעיות-נפוצות)
6. [טיפים לשמירה על מאגר יעיל](#טיפים-לשמירה-על-מאגר-יעיל)

## מה זה Git LFS?

Git LFS (Large File Storage) הוא הרחבה של Git שמיועדת לטיפול בקבצים גדולים. במקום לאחסן את הקבצים הגדולים ישירות בתוך מאגר ה-Git, Git LFS מאחסן רק מצביעים קטנים (pointers) במאגר, בעוד שהקבצים עצמם מאוחסנים בשרת נפרד. זה מקטין משמעותית את גודל המאגר ומאפשר עבודה יעילה יותר עם קבצים גדולים.

### יתרונות Git LFS

- **הקטנת גודל המאגר**: מאגר ה-Git יהיה קטן יותר כי הקבצים הגדולים לא יאוחסנו בו ישירות.
- **שיפור ביצועים**: פעולות Git כמו clone, pull, push יהיו מהירות יותר.
- **תמיכה בקבצים גדולים**: תוכל לעקוב אחר קבצים גדולים בלי להגדיל משמעותית את גודל המאגר.

### סוגי קבצים שכדאי לנהל עם Git LFS

- קבצי מדיה (תמונות, וידאו, אודיו)
- קבצי נתונים גדולים (JSON, CSV)
- קבצי בינאריים
- קבצי PDF
- קבצי ארכיון (ZIP, TAR.GZ)

## עדכון קבצים רגילים

### שלבים בסיסיים לעדכון קבצים

1. **עדכון המאגר המקומי**:
   ```bash
   git pull origin main
   ```

2. **ביצוע שינויים בקבצים**

3. **הוספת השינויים לקומיט הבא**:
   ```bash
   git add <שם-הקובץ>
   # או להוספת כל השינויים
   git add .
   ```

4. **יצירת קומיט**:
   ```bash
   git commit -m "תיאור השינויים"
   ```

5. **דחיפה לגיטהאב**:
   ```bash
   git push origin main
   ```

## עדכון קבצים גדולים

### הוספת סוגי קבצים חדשים ל-Git LFS

אם אתה צריך להוסיף סוגי קבצים חדשים ל-Git LFS:

```bash
# הוספת סוג קובץ חדש
git lfs track "*.extension"

# לדוגמה, להוספת קבצי PSD
git lfs track "*.psd"

# אל תשכח להוסיף את קובץ .gitattributes לגיט
git add .gitattributes
git commit -m "הוספת סוג קובץ חדש ל-Git LFS"
```

### עדכון קבצים גדולים קיימים

עדכון קבצים גדולים שכבר מנוהלים על ידי Git LFS זהה לעדכון קבצים רגילים:

```bash
# עריכת הקובץ הגדול

# הוספה לקומיט הבא
git add <שם-הקובץ-הגדול>

# יצירת קומיט
git commit -m "עדכון קובץ גדול"

# דחיפה לגיטהאב
git push origin main
```

### הוספת קבצים גדולים חדשים

```bash
# ודא שסוג הקובץ מנוהל על ידי Git LFS
git lfs track "*.extension"

# הוספת הקובץ החדש
git add <שם-הקובץ-החדש>

# יצירת קומיט
git commit -m "הוספת קובץ גדול חדש"

# דחיפה לגיטהאב
git push origin main
```

## התמודדות עם מגבלת 100 הקבצים

גיטהאב מגביל את מספר הקבצים שניתן לדחוף בקומיט אחד. אם אתה נתקל במגבלה זו, הנה כמה פתרונות:

### פיצול לקומיטים קטנים

במקום לדחוף הרבה קבצים בקומיט אחד, פצל אותם לקומיטים קטנים:

```bash
# קומיט ראשון עם חלק מהקבצים
git add path/to/some/files/*
git commit -m "הוספת קבוצת קבצים ראשונה"

# קומיט שני עם קבצים נוספים
git add path/to/more/files/*
git commit -m "הוספת קבוצת קבצים שנייה"

# דחיפה לגיטהאב
git push origin main
```

### שימוש בתיקיות לוגיות

ארגן את הקבצים בתיקיות לוגיות ודחוף כל תיקייה בנפרד:

```bash
# דחיפת תיקיית frontend
git add frontend/
git commit -m "עדכון קבצי frontend"

# דחיפת תיקיית backend
git add backend/
git commit -m "עדכון קבצי backend"

# דחיפה לגיטהאב
git push origin main
```

## פתרון בעיות נפוצות

### בעיית "File too large"

אם אתה מקבל שגיאה שקובץ גדול מדי:

1. **הוסף את הקובץ ל-Git LFS**:
   ```bash
   git lfs track "<pattern-שמתאים-לקובץ>"
   git add .gitattributes
   git add <שם-הקובץ-הגדול>
   git commit -m "הוספת קובץ גדול באמצעות Git LFS"
   git push origin main
   ```

2. **אם הקובץ כבר נדחף בעבר ללא Git LFS**:
   ```bash
   # הסרת הקובץ מההיסטוריה
   git filter-branch --force --index-filter "git rm --cached --ignore-unmatch <שם-הקובץ>" --prune-empty --tag-name-filter cat -- --all
   
   # הגדרת הקובץ ל-Git LFS
   git lfs track "<pattern-שמתאים-לקובץ>"
   git add .gitattributes
   
   # הוספת הקובץ מחדש
   git add <שם-הקובץ>
   git commit -m "הוספת קובץ גדול באמצעות Git LFS"
   git push origin main --force
   ```

### בעיית "Too many files changed"

אם אתה מקבל שגיאה על יותר מדי קבצים:

1. **פיצול לקומיטים קטנים** כפי שהוסבר למעלה.

2. **שימוש בדחיפה הדרגתית**:
   ```bash
   # דחיפה הדרגתית
   git push origin <commit-hash>:main
   # חזור על זה עם קומיטים נוספים
   ```

### בעיות בהורדת קבצי Git LFS

אם יש בעיות בהורדת קבצי Git LFS:

```bash
# בדיקת סטטוס Git LFS
git lfs status

# הורדה מחדש של קבצי Git LFS
git lfs pull

# איפוס מטמון Git LFS
git lfs fetch --all
git lfs checkout
```

## טיפים לשמירה על מאגר יעיל

1. **שמור על .gitignore מעודכן**:
   - ודא שקבצים זמניים, קבצי בנייה, ותיקיות כמו `node_modules` מוחרגים.
   - הוסף קבצי סביבה (`.env`) ל-.gitignore.

2. **השתמש ב-Git LFS בחוכמה**:
   - הגדר רק סוגי קבצים שבאמת צריכים את Git LFS.
   - זכור שיש מגבלות אחסון ותעבורה ב-Git LFS בחשבונות חינמיים.

3. **נקה את המאגר מדי פעם**:
   ```bash
   # מחיקת ענפים שמוזגו
   git branch --merged | grep -v "\*" | xargs -n 1 git branch -d
   
   # ניקוי קבצים שאינם בשימוש
   git gc --aggressive --prune=now
   ```

4. **שקול שימוש בתת-מאגרים (submodules) או מאגרים נפרדים**:
   - אם הפרויקט גדל מאוד, שקול לפצל אותו למאגרים נפרדים (למשל, frontend ו-backend).
   - השתמש בתת-מאגרים לחלקים שמתעדכנים לעתים רחוקות.

5. **בדוק את גודל המאגר**:
   ```bash
   # התקנת git-sizer
   brew install git-sizer
   
   # בדיקת גודל המאגר
   git-sizer --verbose
   ```

---

מקווה שמדריך זה יעזור לך לעדכן את הפרויקט באופן עצמאי. אם יש לך שאלות נוספות, אל תהסס לפנות.
